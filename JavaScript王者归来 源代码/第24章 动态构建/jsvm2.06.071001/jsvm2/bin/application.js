_JSVM_Namespace.runtimeEnvironment.loadModule("application",function(){var jsre=_JSVM_Namespace.runtimeEnvironment,JSVM=jsre.JSVM;var isMoz=/gecko/i.test(navigator.userAgent);var isIe=/msie/i.test(navigator.userAgent);window.application=new function(){this.title="Web Application";this.main="url("+jsre.jsvmHome+"/bin/res/__web.htm)";this.frame=null;this.getWindow=function(){return window;};this.isAlive=function(){return(window.closed==false);};this.exit=function(){window.opener=null;window.close();};this.getParameter=function(name){var re=new RegExp("([\?]|&)("+name+"=)([^&]*)");return re.test(window.location.search)?unescape(RegExp.$3):null;};var properties={};this.setProperty=function(name,val){properties[name]=val;};this.getProperty=function(name){return properties[name];};this.showForm=function(url){if(this.frame){this.frame.src=url;}};this.initialize=function(){var application=this;var frame=jsre.config.getParameter("frame");if(frame=="auto"){frame="___frame__"+new Date().getTime();if(isMoz){document.write('<body topmargin="0" leftmargin="0" bottommargin="0" rightmargin="0">'+'<iframe frameborder="0" id="' + frame + '" name="'+frame+'" style="width:100%;height:100%"></iframe></body>');}else{document.write('<frameset rows="*"><frame application="yes" frameborder="0" id="'+frame+'" name="'+frame+'" scrolling="yes" /></frameset>');}};application.main=jsre.config.getParameter("main");var onAppInitialize=function(){if(frame!=null){application.frame=document.getElementById(frame);};if(/^url\((.*)\)$/.test(application.main)){application.showForm(RegExp.$1);}else if(/^class\((.*)\)$/.test(application.main)){try{var mainClass=RegExp.$1,params={};var hash=window.location.hash;if(hash!=""){var ps=hash.substring(1).split("&");for(var i=0;i<ps.length;i++){var pstr=ps[i],pos=pstr.indexOf("=");if(pos!=-1){params[pstr.substring(0,pos)]=unescape(pstr.substring(pos+1));}}};var clz=Class.forName(mainClass);if(!clz.main){throw "can't find method: 'main'.";}else{clz.main(params);}}catch(ex){JSVM.console.write("application main-class run error: "+ex.toString());}}};var onAppDestroy=function(){deon(document,"keydown",onDocKeydown);application.frame=null;};var onDocKeydown=function(){var evt=arguments[0]||window.event;if((evt.ctrlKey&&",17,66,70,78,80,".indexOf(","+evt.keyCode+",")!=-1)||evt.keyCode==116){try{evt.returnValue=false;}catch(ex){};try{evt.preventDefault();}catch(ex){}}};var on=function(el,type,func){if(!isIe){el.addEventListener(type,func,false);}else{el.attachEvent('on'+type,func);}};var deon=function(el,type,func){if(!isIe){el.removeEventListener(type,func,false);}else{el.detachEvent('on'+type,func);}};on(document,"keydown",onDocKeydown);on(window,"load",onAppInitialize);on(window,"unload",onAppDestroy);}};application.initialize();});